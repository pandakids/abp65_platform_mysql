(function(){app.modals.CreateOrEditEditionModal=function(){var n,r=abp.services.app.edition,t=null,i;this.init=function(r){n=r;var u=n.getModal();i=new FeaturesTree;i.init(u.find(".feature-tree"));t=n.getModal().find("form[name=EditionInformationsForm]");t.validate()};this.save=function(){if(t.valid()){if(!i.isValid()){abp.message.warn(app.localize("InvalidFeaturesWarning"));return}var u=t.serializeFormToObject();n.setBusy(!0);r.updateEdition({edition:u,featureValues:i.getFeatureValues()}).done(function(){abp.notify.info(app.localize("SavedSuccessfully"));n.close();abp.event.trigger("app.createOrEditEditionModalSaved")}).always(function(){n.setBusy(!1)})}}}})();