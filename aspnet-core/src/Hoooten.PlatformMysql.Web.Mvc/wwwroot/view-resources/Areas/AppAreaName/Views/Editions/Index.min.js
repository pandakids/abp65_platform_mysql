(function(){$(function(){function s(n){abp.message.confirm(app.localize("EditionDeleteWarningMessage",n.displayName),app.localize("AreYouSure"),function(i){i&&t.deleteEdition({id:n.id}).done(function(){r();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function r(){i.ajax.reload()}var u=$("#EditionsTable"),t=abp.services.app.edition,n={create:abp.auth.hasPermission("Pages.Editions.Create"),edit:abp.auth.hasPermission("Pages.Editions.Edit"),"delete":abp.auth.hasPermission("Pages.Editions.Delete"),moveTenantsToAnotherEdition:abp.auth.hasPermission("Pages.Editions.MoveTenantsToAnotherEdition")},f=new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Editions/CreateModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Editions/_CreateModal.js",modalClass:"CreateOrEditEditionModal"}),e=new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Editions/EditModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Editions/_EditModal.js",modalClass:"CreateOrEditEditionModal"}),o=new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Editions/MoveTenantsToAnotherEdition",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Editions/_MoveTenantsToAnotherEditionModal.js",modalClass:"MoveTenantsToAnotherEditionModal"}),i;$("#CreateNewEditionButton").click(function(){f.open()});abp.event.on("app.createOrEditEditionModalSaved",function(){r()});i=u.DataTable({paging:!1,listAction:{ajaxFunction:t.getEditions},columnDefs:[{className:"control responsive",orderable:!1,render:function(){return""},targets:0},{targets:1,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{text:'<i class="fa fa-cog"><\/i> '+app.localize("Actions")+' <span class="caret"><\/span>',items:[{text:app.localize("Edit"),visible:function(){return n.edit},action:function(n){e.open({id:n.record.id})}},{text:app.localize("Delete"),visible:function(){return n.delete},action:function(n){s(n.record)}},{text:app.localize("MoveTenantsToAnotherEdition"),visible:function(){return n.moveTenantsToAnotherEdition},action:function(n){o.open({id:n.record.id})}}]}},{targets:2,data:"displayName"},{targets:3,data:"price",render:function(n,t,i){return i.monthlyPrice||i.annualPrice?"$ "+i.monthlyPrice+" "+app.localize("Monthly")+" / $ "+i.annualPrice+" "+app.localize("Annual"):app.localize("Free")}},{targets:4,data:"trialDayCount",render:function(n){return n>0?app.localize("Yes")+", "+n+" "+app.localize("Days"):app.localize("No")}},{targets:5,data:"waitingDayAfterExpire"},{targets:6,data:"expiringEditionDisplayName"}]})})})();