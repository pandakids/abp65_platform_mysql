(function(){app.modals.LookupModal=function(){function f(){r.ajax.reload()}function e(i){var r=t.canSelect(i);if(r){if(r===!0){n.setResult(i);n.close();return}r.then(function(t){t&&(n.setResult(i),n.close())})}}var n,r,u,i,t={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize,canSelect:function(){return!0}};this.init=function(o){n=o;t=$.extend(t,n.getOptions().lookupOptions);u=n.getModal().find(".lookup-modal-table");r=u.DataTable({paging:!0,serverSide:!0,processing:!0,lengthChange:!1,pageLength:t.pageSize,deferLoading:t.loadOnStartup?null:0,listAction:{ajaxFunction:t.serviceMethod,inputFilter:function(){return $.extend({filter:i.val()},n.getArgs().extraFilters)}},columnDefs:[{targets:0,data:null,orderable:!1,defaultContent:"",className:"text-center",rowAction:{element:$("<button/>").addClass("btn btn-metal m-btn m-btn--icon m-btn--icon-only").attr("title",app.localize("Select")).append($("<i/>").addClass("la la-chevron-circle-right")).click(function(){var n=$(this).data();e(n)})}},{targets:1,data:"name"}]});n.getModal().find(".lookup-filter-button").click(function(n){n.preventDefault();f()});n.getModal().find(".modal-body").keydown(function(n){n.which===13&&(n.preventDefault(),f())});i=n.getModal().find(".lookup-filter-text");i.val(t.filterText)}};app.modals.LookupModal.create=function(n){return new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Common/LookupModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Common/Modals/_LookupModal.js",modalClass:"LookupModal",lookupOptions:n})}})(),function(){app.modals.EntityTypeHistoryModal=function(){function e(){r.ajax.reload()}function o(n){var t=new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/AuditLogs/EntityChangeDetailModal",modalClass:"EntityChangeDetailModal"});t.open({entityChangeListDto:n})}var n,r,u,i,f=abp.services.app.auditLog,t={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize,canSelect:function(){return!0}};this.init=function(s){n=s;t=$.extend(t,n.getOptions().lookupOptions);u=n.getModal().find(".entity-type-history-table");i=n.getArgs();r=u.DataTable({paging:!0,serverSide:!0,processing:!0,lengthChange:!1,pageLength:t.pageSize,deferLoading:t.loadOnStartup?null:0,listAction:{ajaxFunction:f.getEntityTypeChanges,inputFilter:function(){return{entityTypeFullName:i.entityTypeFullName,entityId:i.entityId}}},columnDefs:[{targets:0,data:null,orderable:!1,defaultContent:"",rowAction:{element:$("<div/>").addClass("text-center").append($("<button/>").addClass("btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill").attr("title",app.localize("EntityChangeDetail")).append($("<i/>").addClass("la la-search"))).click(function(){o($(this).data())})}},{targets:1,data:"changeTypeName",orderable:!1,render:function(n){return app.localize(n)}},{targets:2,data:"userName"},{targets:3,data:"changeTime",render:function(n){return moment(n).format("L LT")}}]});e()}};app.modals.EntityTypeHistoryModal.create=function(){return new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Common/EntityTypeHistoryModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Common/Modals/_EntityTypeHistoryModal.js",modalClass:"EntityTypeHistoryModal"})}}();